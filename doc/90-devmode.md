# DevMode Development

Shell and markdown 4tw!


## VCS

- Everything is on GitHub as GIT or SVN
- Fork the repository or ask for access


### Commits

- Begin with the issue number
- Followed by section(s) with colon
- And an explanation what the new feature is / bug was

Note:
The section can be any "scope" of Magento like "core:" or deeper like "catalog: product:".
This will help generating the ChangeLog later on, so the major description / header needs to
be such a text that briefly describes the feature or bug to an end-user.


## Sample workflow

- From shell to doc


### Shell, Swap, Test, Doc

- Hack and make it work somehow in the **shell**.
- **Swap** to model, helper and backend.
- Write **tests** for those.
- Make some screen shots and **doc** for release notes.


### Naming

- Test-classes are named like the tested class
- Methods will form a sentence like a feature description
- phpunit --testdox-text FEATURES.md  --stop-on-failure

Note:
With this setup PHPUnit will almost generate a feature list.
You only need to revise the list and eliminate duplicates or cut of the "LeMike_DevMode_Test_xyz_"
from the class names.


## Code Quality

- Code quality with PHPMD and PHP_CodeSniffer
- Testing static/logic and dynamic/usable


### PHP Mess Detector

- **Code size**: Cyclomatic complexity, NPath Complexity,
  excessive naming or amount of methods/properties
- **Controversial rules**: like accessing super-globals directly.
- **Design hints**: no exit/eval/goto, low depth of inheritance and low coupling between objects.
- **Naming rules**: too short/long variables, naming and no getter with boolean return value.
- **Unused code**: unused private fields/methods, local variables or formal parameter.


### UnitTests with EcomDev_PHPUnit

- Will be made with EcomDev_PHPUnit for magento
- Run on travis-ci for:
    - PHP 5.4 / 5.3
    - Magento 1.7.0.2 / 1.6.2.0 / 1.5.1.0


### Back- and Frontend with Casper.js

Note: Some things can not be testet with PHPUnit.
So all the missing tests on the frontend and
to ensure that everything is usable goes down to casperJS.

- Easy to install `npm install -g casperjs`
- Ensures dynamic content
- All made upon the Webkit (so no FF)


![A Suite in CasperJS](https://f.cloud.github.com/assets/2559177/1748101/c441b51c-649d-11e3-9baf-218d63a92ae7.png)


In addition casperJS will collect screenshots of every important tool.

```
casper.captureSelector 'default_cms_index_index#ld_toolbox.png', '#ld_toolbox'
```

Note: This can be used for an up-to-date documentation with the latest images.

### Release

- Copy the release issue for the last milestone
- Collect release notes as described below

## Power of the docs

- Use it for release notes
- Generate a manual
- Have something to read in GitHub
- Use it as presentation in no time


### Release Notes

Images for the documentation can be stored as a draft in
[GitHub Release Notes](https://github.com/sourcerer-mike/magento-devMode/releases).
Right before the release of a version you can run

```
git diff master..HEAD doc/??-*.md
```

to see changes in documentation and copy them to the release notes.


### Tools

Within the doc folder you find some helpful scripts:

- makeManual.sh - will generate a Manual.pdf
- makePresentation.php - will create a reveal.js presentation

Note: This is all generated by using the MD


### Structure

To make this possible the MD must have this:

- Double-New-Line to let it be a new slide (e.g. above headings)
- "Note: " as prefix for paragraphs that shall be a note in presentation.
- A limit of 5 bullets or one image/source per slide.
- Clean structure and short sentences.
